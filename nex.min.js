!function(e,t){"use strict";"function"==typeof define&&define.amd?define([],t):e.Nex=t(e.b)}(this,function(){"use strict";var e={blur:!0,focus:!0,mouseenter:!0,mouseleave:!0,resize:!0,scroll:!0},t={utilities:{html5:"querySelector"in document&&"localStorage"in window&&"addEventListener"in window,parseEventTypes:function(e){var t=e.match(/\son-\w+(?==")/g),n=[];if(t)for(var i=0;i<t.length;i++){var o=t[i].split("-")[1];-1===n.indexOf(o)&&n.push(o)}return n}},View:{extend:function(n){return"undefined"==typeof n&&(n={}),function i(){var o=this;for(var r in n)n.hasOwnProperty(r)&&(o[r]=n[r]);"undefined"==typeof o.tagName&&(o.tagName="div"),"undefined"==typeof o.el&&(o.el=document.createElement(o.tagName)),"undefined"!=typeof o.id&&(o.el.id=o.id),"undefined"!=typeof o.className&&(o.el.className=o.className),"object"!=typeof o.components&&(o.components={}),o._initializedComponents={};for(var l in o.components)if(o.components.hasOwnProperty(l)){if(o._initializedComponents[l]=o.components[l],"function"==typeof o._initializedComponents[l]){var a=arguments,d=function(){return o._initializedComponents[l].apply(this,a),this.__proto__=o._initializedComponents[l].prototype,this};o._initializedComponents[l]=new d}if(!o._initializedComponents[l]instanceof i)throw"Every component must be a View constructor or an instance of a View."}if("undefined"!=typeof o.layout){if("function"==typeof o.layout&&(o.layout=new o.layout),!o.layout instanceof i)throw"The `view.layout` must be a View constructor or an instance of a View.";if("string"!=typeof o.layout.contentPlaceholder)throw"The layout view must have contentPlaceholder.";o.layout._initializedComponents[o.layout.contentPlaceholder]=o}if("undefined"!=typeof o.contentPlaceholder&&"string"!=typeof o.contentPlaceholder)throw"The contentPlaceholder must be a string.";if("undefined"!=typeof o.outerEl)throw"`view.outerEl` is a read only property that is automatically populated.";o.outerEl=o.layout?o.layout.outerEl:o.el,"undefined"==typeof o.model&&(o.model={}),"undefined"==typeof o.template&&(o.template=function(){return console.log("You should implement `View.template()`."),""});var f=function(){var e;return e="function"==typeof o.model?new o.model:o.model,"function"==typeof o.template?o.html(o.template({model:e})):"string"==typeof o.template&&o.html(o.template),o};"undefined"!=typeof o.render&&(f=o.render);var u=o.layout?!0:!1;o.render=function(){u&&(o.layout.render(),u=!1);var e=f.call(this,arguments);for(var t in o._initializedComponents)if(o._initializedComponents.hasOwnProperty(t)){var n=o.el.querySelector(t);if(!n)throw"Invalid component selector or layout contentPlaceholder: "+t;for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(o._initializedComponents[t].el)}return e},o.html=function(e){if(t.utilities.html5)o.el.innerHTML=e;else{var n=document.createElement("div");for(n.innerHTML=e;o.el.firstChild;)o.el.removeChild(o.el.firstChild);for(;n.firstChild;)o.el.appendChild(n.firstChild)}c(t.utilities.parseEventTypes(e))},o.attachTo=function(e){var n;if("string"==typeof e)n=document.querySelector(e);else{if(!e.appendChild)throw"You can't attach the view to "+e;n=e}if(t.utilities.html5)n.innerHTML="";else for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(o.outerEl)},"undefined"==typeof o.remove&&(o.remove=function(){null!==o.el.parentElement&&o.el.parentElement.removeChild(o.el)}),o.dispatchEvent=function(e){if(!e._outOfOriginatingViewScope){e.target||(e.target=e.srcElement);for(var t=e.target.attributes,n=0;n<t.length;n++)"on-"===t[n].name.substring(0,3)&&t[n].name.substring(3)===e.type&&o[t[n].value].call(o,e);e._outOfOriginatingViewScope=!0}};var s={},c=function(t){for(var n=0;n<t.length;n++){var i=t[n];s[i]||(window.addEventListener?e[i]?o.el.addEventListener(i,o.dispatchEvent,!0):o.el.addEventListener(i,o.dispatchEvent,!1):o.el.attachEvent("on"+i,o.dispatchEvent),s[i]=!0)}};"function"==typeof o.initialize&&o.initialize.apply(o,arguments),o.autoRender!==!1&&"undefined"==typeof o.contentPlaceholder&&o.render.call(o)}}}};return t});