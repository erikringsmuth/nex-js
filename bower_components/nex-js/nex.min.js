!function(e,t){"use strict";"function"==typeof define&&define.amd?define([],t):e.Nex=t(e.b)}(this,function(){"use strict";var e="querySelector"in document&&"localStorage"in window&&"addEventListener"in window,t={View:{extend:function(t){return"undefined"==typeof t&&(t={}),function n(){var o=this;for(var i in t)t.hasOwnProperty(i)&&(o[i]=t[i]);"undefined"==typeof o.tagName&&(o.tagName="div"),"undefined"==typeof o.el&&(o.el=document.createElement(o.tagName)),"undefined"!=typeof o.id&&(o.el.id=o.id),"undefined"!=typeof o.className&&(o.el.className=o.className),"object"!=typeof o.components&&(o.components={}),o._initializedComponents={};for(var r in o.components)if(o.components.hasOwnProperty(r)){if(o._initializedComponents[r]=o.components[r],"function"==typeof o._initializedComponents[r]){var a=arguments,l=function(){return o._initializedComponents[r].apply(this,a),this.__proto__=o._initializedComponents[r].prototype,this};o._initializedComponents[r]=new l}if(!o._initializedComponents[r]instanceof n)throw"Every component must be a View constructor or an instance of a View."}if("undefined"!=typeof o.layout){if("function"==typeof o.layout&&(o.layout=new o.layout),!o.layout instanceof n)throw"The `view.layout` must be a View constructor or an instance of a View.";if("string"!=typeof o.layout.contentPlaceholder)throw"The layout view must have contentPlaceholder.";o.layout._initializedComponents[o.layout.contentPlaceholder]=o}if("undefined"!=typeof o.contentPlaceholder&&"string"!=typeof o.contentPlaceholder)throw"The contentPlaceholder must be a string.";if("undefined"!=typeof o.outerEl)throw"`view.outerEl` is a read only property that is automatically populated.";o.outerEl=o.layout?o.layout.outerEl:o.el,"undefined"==typeof o.model&&(o.model={}),"undefined"==typeof o.template&&(o.template=function(){return console.log("You should implement `View.template()`."),""});var f=function(){var e;return e="function"==typeof o.model?new o.model:o.model,"function"==typeof o.template?o.html(o.template({model:e})):"string"==typeof o.template&&o.html(o.template),o};"undefined"!=typeof o.render&&(f=o.render);var d=o.layout?!0:!1;o.render=function(){d&&(o.layout.render(),d=!1);var e=f.call(this,arguments);for(var t in o._initializedComponents)if(o._initializedComponents.hasOwnProperty(t)){for(var n=o.el.querySelector(t);n.firstChild;)n.removeChild(n.firstChild);n.appendChild(o._initializedComponents[t].el)}return e},o.html=function(t){if(e)o.el.innerHTML=t;else{var n=document.createElement("div");for(n.innerHTML=t;o.el.firstChild;)o.el.removeChild(o.el.firstChild);for(;n.firstChild;)o.el.appendChild(n.firstChild)}},o.attachTo=function(t){var n;if("string"==typeof t)n=document.querySelector(t);else{if(!t.appendChild)throw"You can't attach the view to "+t;n=t}if(e)n.innerHTML="";else for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(o.outerEl)},"undefined"==typeof o.remove&&(o.remove=function(){null!==o.el.parentElement&&o.el.parentElement.removeChild(o.el)}),"undefined"==typeof o.on&&(o.on={});var u={};for(var p in o.on)if(o.on.hasOwnProperty(p)){var s=p.split(" "),c=s[0],m=s.splice(1,s.length-1).join(" ");!function(e,t,n){var i=function(e){var i=o.el.querySelectorAll(t);for(var r in i)if(e.target||(e.target=e.srcElement),e.target===i[r]){o.on[n].call(o,e);break}};window.addEventListener?o.el.addEventListener(e,i,!0):o.el.attachEvent("on"+e,i),"undefined"==typeof u[e]&&(u[e]=[]),u[e].push(i)}(c,m,p)}o.dispatchMockEvent=function(e){if("undefined"==typeof e)throw"You must pass a mock event";if("undefined"==typeof e.type)throw"You specify an event type";if("undefined"==typeof e.target)throw"You specify an event target";if("undefined"==typeof u[e.type])throw"There are no event handlers set up for "+e.type+"events";u[e.type].forEach(function(t){t(e)})},"function"==typeof o.initialize&&o.initialize.apply(o,arguments),o.autoRender!==!1&&"undefined"==typeof o.contentPlaceholder&&o.render.call(o)}}}};return t});