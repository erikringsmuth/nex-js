!function(e,t){"use strict";"function"==typeof define&&define.amd?define([],t):e.Nex=t(e.b)}(this,function(){"use strict";var e="querySelector"in document&&"localStorage"in window&&"addEventListener"in window,t={View:{extend:function(t){return"undefined"==typeof t&&(t={}),function n(){var i=this;for(var o in t)t.hasOwnProperty(o)&&(i[o]=t[o]);if("undefined"==typeof i.tagName&&(i.tagName="div"),"undefined"==typeof i.el&&(i.el=document.createElement(i.tagName)),"undefined"!=typeof i.layout){if("function"==typeof i.layout&&(i.layout=new i.layout),!i.layout instanceof n)throw"The `view.layout` must be a View constructor or an instance of a View.";if("string"!=typeof i.layout.contentPlaceholderId)throw"The layout view must have `view.contentPlaceholderId` specified.";i.layout.childView=i}if("undefined"!=typeof i.contentPlaceholderId&&"string"!=typeof i.contentPlaceholderId)throw"The `contentPlaceholderId` must be a string.";if("undefined"!=typeof i.childView)throw"You can't specify `view.childView`. This is set automatically on the layout when a view specifies `view.layout`.";if("undefined"!=typeof i.outerEl)throw"`view.outerEl` is a read only property that is automatically populated.";i.outerEl=i.layout?i.layout.outerEl:i.el,"undefined"!=typeof i.id&&(i.el.id=i.id),"undefined"!=typeof i.className&&(i.el.className=i.className),"undefined"==typeof i.model&&(i.model={}),"undefined"==typeof i.template&&(i.template=function(){return console.log("You should implement `View.template()`."),""});var l=function(){var e;return e="function"==typeof i.model?new i.model:i.model,"function"==typeof i.template?i.html(i.template({model:e})):"string"==typeof i.template&&i.html(i.template),i};"undefined"!=typeof i.render&&(l=i.render);var r=i.layout?!0:!1;i.render=function(){r&&(i.layout.render(),r=!1);var e=l.call(this,arguments);if(i.childView){for(var t=i.el.querySelector("#"+i.contentPlaceholderId);t.firstChild;)t.removeChild(t.firstChild);t.appendChild(i.childView.el)}return e},i.html=function(t){if(e)i.el.innerHTML=t;else{var n=document.createElement("div");for(n.innerHTML=t;i.el.firstChild;)i.el.removeChild(i.el.firstChild);for(;n.firstChild;)i.el.appendChild(n.firstChild)}},"undefined"==typeof i.remove&&(i.remove=function(){null!==i.el.parentElement&&i.el.parentElement.removeChild(i.el)}),"undefined"==typeof i.on&&(i.on={});var a={};for(var d in i.on)if(i.on.hasOwnProperty(d)){var f=d.split(" "),u=f[0],c=f.splice(1,f.length-1).join(" ");!function(e,t,n){var o=function(e){var o=i.el.querySelectorAll(t);for(var l in o)if(e.target||(e.target=e.srcElement),e.target===o[l]){i.on[n].call(i,e);break}};window.addEventListener?i.el.addEventListener(e,o,!0):i.el.attachEvent("on"+e,o),"undefined"==typeof a[e]&&(a[e]=[]),a[e].push(o)}(u,c,d)}i.dispatchMockEvent=function(e){if("undefined"==typeof e)throw"You must pass a mock event";if("undefined"==typeof e.type)throw"You specify an event type";if("undefined"==typeof e.target)throw"You specify an event target";if("undefined"==typeof a[e.type])throw"There are no event handlers set up for "+e.type+"events";a[e.type].forEach(function(t){t(e)})},"function"==typeof i.initialize&&i.initialize.apply(i,arguments),i.autoRender!==!1&&i.render.call(i)}}}};return t});