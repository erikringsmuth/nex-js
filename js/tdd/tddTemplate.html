<h2>Unit Testing</h2>

<p>Test with the framework of your choice. Injecting AMD mocks is done with <a href="https://github.com/iammerrick/Squire.js">Squire.js</a>. Here's an example <a href="http://jasmine.github.io/2.0/introduction.html">Jasmine</a> & Squire.js setup.</p>

<p class="spacer">This is the real <code class="pln">/js/home/homePage.js</code> we want to test.</p>

<pre class="prettyprint"><code>define([
  'nex',
  'handlebars',
  'js/home/homeModel' // This is the dependency we want to mock
], function(Nex, Handlebars, homeModel) {
  'use strict';

  return Nex.defineComponent('test-component', {
    template: Handlebars.compile('&lt;div&gt;Hello \{{model.name}}!&lt;/div&gt;'),
    model: homeModel
  });
});</code></pre>

<p class="spacer">Set up your test like this to inject a <code>homeModel</code> mock with Squire.</p>

<pre class="prettyprint"><code>
define([
  'jasmine/amd/describe',
  'jasmine/amd/it',
  'jasmine/amd/expect',
  'Squire'
], function(describe, it, expect, Squire) {
  'use strict';

  describe('The home page', function() {
    it('should display "Hello Nex!"', function(done) {
      // Arrange
      new Squire()
        .mock('js/home/homeModel', { // This is how we mock the dependency
          name: 'Nex'
        })
        .require(['js/home/homePage'], function(HomePage) {
          // Act
          var homeView = new HomePage();

          // Assert
          expect(homeView.el.innerHTML).toEqual('&lt;div&gt;Hello Nex!&lt;/div&gt;');

          // Tells Jasmine the async test is done
          done();
        });
    });
  });
});</code></pre>

<h2 class="spacer">Test Runer</h2>

<p>The nex-js website's <a href="tests/AmdSpecRunner.html">Jasmine Spec Runner</a> is run below. You can see how they're written in the nex-js gh-pages branch <a href="https://github.com/erikringsmuth/nex-js/tree/gh-pages/tests">tests folder</a>.</p>

<iframe src="tests/AmdSpecRunner.html" class="spec-runner"></iframe>

<p class="spacer">Note: There is another library <a href="https://github.com/medallia/testr.js">testr.js</a> for injecting mocks but it doesn't follow the AMD spec and it hijacks the main <code>window.require()</code> function.</p>
