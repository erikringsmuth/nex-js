<h2>Full site example</h2>

<p>This site is built on <a href="http://requirejs.org/">RequireJS</a>, <a href="https://github.com/erikringsmuth/nex-js">nex-js</a>, and the <a href="https://github.com/erikringsmuth/requirejs-router">RequireJS Router</a>. The site's source is available in the <a href="https://github.com/erikringsmuth/nex-js/tree/gh-pages">gh-pages branch</a> of nex-js. This is a great example of a full site setup. Dependencies are installed using <a href="http://bower.io/">Bower</a>.</p>

<h2>Site structure</h2>

<p>Directory layout - the site should be structured so that each page and widget gets its own folder so that related files are kept together</p>

<pre>├── index.html
└── js/
    ├── main.js
    ├── layout/
    │   ├── layoutView.js
    │   └── layoutTemplate.html
    └── home/
        ├── homeView.js
        └── homeTemplate.js</pre>

<ul class="spacer">
  <li><code>index.html</code> loads <code>require.js</code></li>
  <li><code>require.js</code> looks at the <code>data-main</code> attribute and loads <code>main.js</code></li>
  <li><code>main.js</code> configures <code>require.js</code> and the <code>requirejs-router</code></li>
  <li>The <code>requirejs-router</code> loads the current route <code>/</code> which gets <code>homeView.js</code></li>
  <li><code>homeView.js</code> uses <code>layoutView.js</code> as it's layout</li>
  <li>The home view and layout are rendered and attached to the document in the router's <code>routeLoadedCallback()</code></li>
</ul>

<p class="spacer"><code>/index.html</code> - loaded when you route to <code>/</code> or any hash route (starting with <code>#/</code> or <code>#!/</code>)</p> 

<pre>&lt;!doctype html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;nex-js&lt;/title&gt;
    &lt;script data-main="js/main" src="bower_components/require/require.js"&gt;&lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;&lt;/body&gt;
&lt;/html&gt;</pre>

<p class="spacer"><code>/js/main.js</code> - configure the router and load the current route</p>

<pre>(function() {
  'use strict';
  require.config({...});

  require(['router'], function(router) {
    router.config({
      routes: {
        root: {path: '/', module: 'home/homeView'},
        example: {path: '/example', module: 'example/exampleView'},
        notFound: {path: '*', module: 'notFound/NotFoundView'}
      },
      routeLoadedCallback: function routeLoadedCallback(View) {
        var body = document.querySelector('body');
        body.innerHTML = '';
        body.appendChild(new View().render().outerEl);
      }
    }).loadCurrentRoute();
  });
})();</pre>

<p class="spacer"><code>/js/layout/layoutView.js</code> - your site's layout</p>

<pre>define([
  'nex',
  'handlebars',
  'text!./layoutTemplate.html',
  'router'
], function(Nex, Handlebars, layoutTemplate, router) {
  'use strict';

  return Nex.View.extend({
    template: Handlebars.compile(layoutTemplate),
    model: {routes: router.routes}
    contentPlaceholderId: 'content'
  });
});</pre>

<p class="spacer"><code>/js/layout/layoutTemplate.html</code> - the layout HTML</p>

<pre>&lt;header&gt;
  &lt;ul class="navbar"&gt;
    &lt;li \{{#if model.routes.root.matchesUrl}}class="active"\{{/if}}&gt;&lt;a href="#/"&gt;nex-js&lt;/a&gt;&lt;/li&gt;
    &lt;li \{{#if model.routes.example.matchesUrl}}class="active"\{{/if}}&gt;&lt;a href="#/example"&gt;Examples&lt;/a&gt;&lt;/li&gt;
  &lt;/ul&gt;
&lt;/header&gt;
&lt;main id="content"&gt;
&lt;/main&gt;</pre>

<p class="spacer"><code>/js/home/homeView.js</code> - the AMD module loaded for the root route <code>/</code></p>

<pre>define([
  'nex',
  'handlebars',
  'text!./homeTemplate.html',
  'layout/layoutView'
], function(Nex, Handlebars, homeTemplate, LayoutView) {
  'use strict';

  return Nex.View.extend({
    template: Handlebars.compile(homeTemplate),
    layoutView: new LayoutView()
  });
});</pre>

<p class="spacer"><code>/js/home/homeTemplate.html</code> - the HTML for the root route <code>/</code></p>

<pre>&lt;h1&gt;Powerful, modular, AMD compatible views.&lt;/h1&gt;</pre>
