!function(e,t){"use strict";"function"==typeof define&&define.amd?define([],t):e.Nex=t(e.b)}(this,function(){"use strict";var e={View:{extend:function(e){return"undefined"==typeof e&&(e={}),function t(){var n=this;for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);if("undefined"==typeof n.tagName&&(n.tagName="div"),"undefined"==typeof n.el&&(n.el=document.createElement(n.tagName)),"undefined"!=typeof n.layoutView){if(!n.layoutView instanceof t)throw"The `view.layoutView` must be an instance of a View.";if("string"!=typeof n.layoutView.contentPlaceholderId)throw"The layout view must have `view.contentPlaceholderId` specified.";n.layoutView.childView=n}if("undefined"!=typeof n.contentPlaceholderId&&"string"!=typeof n.contentPlaceholderId)throw"The `contentPlaceholderId` must be a string.";if("undefined"!=typeof n.childView)throw"You can't specify `view.childView`. This is set automatically on the layout when a view specifies `view.layoutView`.";if("undefined"!=typeof n.outerEl)throw"`view.outerEl` is a read only property that is automatically populated.";n.outerEl=n.layoutView?n.layoutView.outerEl:n.el,"undefined"!=typeof n.id&&(n.el.id=n.id),"undefined"!=typeof n.className&&(n.el.className=n.className),"undefined"==typeof n.model&&(n.model={}),"undefined"==typeof n.template&&(n.template=function(){return console.log("You should implement `View.template()`."),""});var o=function(){var e;return e="function"==typeof n.model?new n.model:n.model,"function"==typeof n.template?n.html(n.template({model:e})):"string"==typeof n.template&&n.html(n.template),n};"undefined"!=typeof n.render&&(o=n.render);var l=n.layoutView?!0:!1;n.render=function(){l&&(n.layoutView.render(),l=!1);var e=o.call(this,arguments);if(n.childView){for(var t=n.el.querySelector("#"+n.contentPlaceholderId);t.firstChild;)t.removeChild(t.firstChild);t.appendChild(n.childView.el)}return e},n.html=function(e){var t=document.createElement("div");for(t.innerHTML=e;n.el.firstChild;)n.el.removeChild(n.el.firstChild);for(;t.firstChild;)n.el.appendChild(t.firstChild)},"undefined"==typeof n.remove&&(n.remove=function(){null!==n.el.parentElement&&n.el.parentElement.removeChild(n.el)}),"undefined"==typeof n.events&&(n.events={});var r={};for(var a in n.events)if(n.events.hasOwnProperty(a)){var d=n.events[a],f=a.split(" "),u=f[0],p=f.splice(1).join(" ");!function(e,t,i){var o=function(e){var o=n.el.querySelectorAll(t);for(var l in o)if(o.hasOwnProperty(l)&&e.target===o[l]){n[i].call(n,e);break}};window.addEventListener?n.el.addEventListener(e,o,!0):n.el.attachEvent(e,o),"undefined"==typeof r[e]&&(r[e]=[]),r[e].push(o)}(u,p,d)}n.dispatchMockEvent=function(e){if("undefined"==typeof e)throw"You must pass a mock event";if("undefined"==typeof e.type)throw"You specify an event type";if("undefined"==typeof e.target)throw"You specify an event target";if("undefined"==typeof r[e.type])throw"There are no event handlers set up for "+e.type+"events";r[e.type].forEach(function(t){t(e)})},"function"==typeof n.initialize&&n.initialize.apply(n,arguments)}}}};return e});